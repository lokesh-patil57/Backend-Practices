<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mini Whatsapp</title>
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="/Chatbot.css" />
  </head>
  <body>
    <h3 style="text-align: center">All Chats!</h3>
    <form method="get" action="/chats/new">
      <button>New Chat</button>
    </form>
    <br />
    <div style="text-align: center">
      <% for (let chat of chats) { %>
        <div class="chat">
          <div class="from">
            <p>From : <i><%= chat.from %></i></p>
          </div>
          <br />
          <div class="msg">
            <p>Message : <%= chat.msg %></p>
          </div>
          <div class="res">
            <p>Received by <i><%= chat.to %></i></p>
          </div>
          <hr />
          <div style="text-align: left">
            <p><%= chat.created_at.toString().split(" ")[4] %></p>
            <p><%= chat.created_at.toString().split(" ").slice(0,4).join(" ") %></p>
          </div>
          <div class="btn">
            <form method="get" action="/chats/<%= chat.id %>/edit">
              <button>Edit Message</button>
            </form>
            <form action="/chats/<%= chat._id %>?_method=DELETE" name="del">
              <button>Delete Chat</button>
            </form>
            <form action="/chats/<%= chat._id %>/show" name="show">
              <button>Show Chat</button>
            </form>
          </div>
        </div>
        <br /><br />
      <% } %>
    </div>

    <!-- Floating Chatbot -->
    <div id="chatbot-container">
      <button id="chatbot-toggle" title="Chat">ðŸ’¬</button>
      <div id="chatbot-window" class="hidden">
        <div class="chat-header">Chatbot</div>
        <div class="chat-window" id="chat-window">
          <p>ðŸ‘‹ Hello! Iâ€™m your chatbot. Start chatting below.</p>
        </div>
        <div class="chat-input">
          <textarea id="user-input" placeholder="Type a message... (Enter to send, Shift+Enter for new line)"></textarea>
          <button id="send-btn">Send</button>
        </div>
      </div>
    </div>

    <script src="/Chatbot.js"></script>
  </body>
</html>
